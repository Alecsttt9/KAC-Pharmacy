{{extend 'kacLayout2.html'}}
<h1 class="text-center" style = "color: #F1b498"><i class="fa-solid fa-warehouse"></i>Patients</h1>
<hr>
<div class="container-fluid bg-4">
<div class="table-responsive">
<table class= "table table-hover table-bordered">
    <tr>
            <input id="myInput" type="text" name = "search" placeholder="Search by last name">
    </tr>
    <thead>
        <th>Modify Profile</th>
        <th>First Name</th><th>Last Name</th><th>DOB</th><th>Phone Number</th><th>Address One</th><th>City</th>
        <th>State</th><th>Zip Code</th><th>Prescriber</th><th>Insurance</th>
        <th>Allergies</th><th>Prescriptions</th><th>Lead Source</th>
    </thead>
    <tbody id="myTable">

{{ print("Hello")}}
{{rows = db.executesql('SELECT p.*, s.stateName sName, prs.firstName prsfn, prs.lastName prsln, l.leadSource lsource \
                        FROM Patients p, States s, Prescribers prs, leadSource l \
                        WHERE p.stateName=s.id AND p.Prescriber = prs.id AND p.leadSource=l.id', as_dict=True)
   for row in rows:
        #print(row)}}
    <tr>
        <td><a href= "#" class="btn btn-sm btn-primary btn-block" role="button">Update</a></td>
       <td>{{=row["firstname"]}}</td><td>{{=row["lastname"]}}</td><td>{{=row["dob"]}}</td><td>{{=row["phonenumber"]}}</td><td>{{=row["address_1"]}}</td><td>{{=row["city"]}}</td>
       <td>{{=row["sName"]}}</td><td>{{=row["zipcode"]}}</td><td>{{=row["prsln"]}}</td><td>{{=row["insurer"]}}</td><td>{{=row["allergies"]}}</td><td>{{=row["prescriptions"]}}</td> <td>{{=row["lsource"]}}</td>
   </tr>

{{pass}}
</tbody>
</table>
</div>
</div>
